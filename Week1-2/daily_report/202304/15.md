# 2023/04/15 (土)

## 本日の目標（TODO 目標/できるようになりたいこと）

- オブジェクト指向の自動販売機

## 学習時間（Hour）

- today: 10h
- total: 44h

## 目標振り返り（TODO 進捗/できるようになりたいこと振り返り）

- オブジェクト指向に早く慣れていきたい
- 自動販売機の問題あとはポリモーフィズムのみ！
  - 詰まるとこもたくさんあるけどわかってくると楽しい

## 詰まっていること（実現したいこと/現状/行ったこと/仮説）

- エラーがないのに思った通りにいかないのが悔しい
  - カップがないのにカップコーヒーが買えたり ← ここで 2 時間潰れました

## 学んだこと（新しい気付き、学び）

- カップがないのにカップコーヒーが買えたりのここの部分で気づいたこと
  - メソッドは長くかかない分割させること、例えば ↓

```ruby
# 自販機のボタンを押して条件が合うと商品が買えて条件が合わないと買えないメソッド
  def press_button(item_object)
    # 現在の金額が100未満だとtureになり100円入れろと怒られる
    if self.total_price < 100
      '100円を入れてください'
    # 100円入ってるけどコーラの150は足りないからtrueになり怒られる
    elsif self.total_price < item_object.price
      "#{item_object.name}を買おうとしてますが\n#{item_object.price - self.total_price}円足りません。"
      # カップ系分岐↓
    elsif cup_count(item_object)
      cup_count(item_object)
    else
      # 全てかえる条件に達したら合計金額から商品の金額を引き算する
      self.total_price -= item_object.price
      "#{item_object.name}のお買い上げありがとうございました！\n現在の所持金は#{total_price}円です"
    end
  end

  # カップコーヒー購入しようとした時のみ走るメソッド、カップの数を管理し減らしたりなかったら買えなくなる
  def cup_count(item_object)
    # item_object.is_a?(CupCoffee)の部分はItem親クラスの中の子クラスCupCoffeeクラスを特定してる
    # カップの数が0以下だったらtrueになって買えなくなる
    if item_object.is_a?(CupCoffee) && item_object.count <= 0
      "申し訳ありませんが、カップがないため#{item_object.name}を買えません。"

      # カップクラスを特定し、カップ買った時かつカップの数が０より多い２つの条件を満たした時のみカップの個数を減らす。
    elsif item_object.is_a?(CupCoffee) && item_object.count.positive? # positive?←これは正の数の意味を持つ(０以上)
      item_object.down_cup
      "残りのカップ数: #{item_object.count}"
    end
  end
```

- このコードを一つのメソッドで管理しようとしてました。
  二つに分けることで目的が明確になりコードが書きやすくなったり、意味も分かりやすくなる。
  上が自販機のお金がちゃんと 100 以上あるかないかのメソッドで下がカップコーヒーを購入した時のみカップの個数を管理するメソッド

## 感想（一日の感想、雑談）

- 坂本さんと面談させていただきました 30 分短すぎてもっとお話聞きたかったです。
- 進歩したのかわかりませんがなんとなくクラスやメソッド継承についてもわかってきました。
- 単一責任の原則、ここめっちゃ大事かもしれない

## 明日の目標（TODO 目標/できるようになりたいこと）

- 自動販売機の課題終わらせ、自分なりにアレンジしてもう一回１から作ってみる。
- わからなくなって嫌になったらオブジェクト指向設計実践ガイド電子書籍で買って見る！！！！
