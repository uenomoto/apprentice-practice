# データベースを正規化できる

エンティティを定義した EC サイトの仕様をベースとして進みます。

## 第一正規形

EC サイトを、第一正規形になるようテーブル設計してください。

テーブル名と、テーブルに紐づくカラム名とプライマリーキーを記載してください。

なお、テーブル名とカラム名は日本語で大丈夫です。

その際に、下記のポイントを抑えるようにしてください。

アプリケーションとして成立すること（プログラムを組んだ際に仕様を満たして動作すること）

テーブルごとにプライマリーキーが設定されていること

1 つのセルに 1 つの値のみが含まれること

以下、回答例です。

[ユーザーテーブル]

ID
名前
プライマリーキー：ID

---

[注文テーブル]

ID
user_ID
order_date
プライマリーキー：ID
外部キー：user_ID

---

[注文商品テーブル]

ID
item_ID
order_ID
quantity(購入個数)
プライマリーキー：ID
外部キー：item_ID, order_ID

---

[商品テーブル]

ID
name
price
category_ID
プライマリーキー：ID
外部キー：category_ID

---

[カテゴリーテーブル]

ID
category_name
プライマリーキー：ID

## 第二正規形

EC サイトの第一正規形の設計を、第二正規形になるようテーブル設計してください。

テーブル名と、テーブルに紐づくカラム名とプライマリーキーを記載してください。

なお、テーブル名とカラム名は日本語で大丈夫です。

その際に、下記のポイントを抑えるようにしてください。

アプリケーションとして成立すること（プログラムを組んだ際に仕様を満たして動作すること）

部分的関数従属性がないこと

[ユーザーテーブル]

ID
名前
プライマリーキー：ID

[注文テーブル]

ID
user_ID
order_date
プライマリーキー：ID
外部キー：user_ID

[注文商品テーブル]

ID
item_ID
order_ID
quantity
プライマリーキー：ID
外部キー：item_ID, order_ID

[商品テーブル]

ID
name
price
category_ID
プライマリーキー：ID
外部キー：category_ID

[カテゴリーテーブル]

ID
category_name
プライマリーキー：ID

## 第三正規形

EC サイトの第二正規形の設計を、第三正規形になるようテーブル設計してください。

テーブル名と、テーブルに紐づくカラム名とプライマリーキーを記載してください。なお、テーブル名とカラム名は日本語で大丈夫です。

なお今回は、要件として「カテゴリー ID をキーとして、カテゴリーごとに商品を検索できる」が追加されたとします。

その際に、下記のポイントを抑えるようにしてください。

アプリケーションとして成立すること（プログラムを組んだ際に仕様を満たして動作すること）

推移的関数従属性がないこと

---

テーブル化します！

[ユーザーテーブル]

| ID  | 名前 |
| --- | ---- |

プライマリーキー：ID

---

[注文テーブル]

| ID  | user_ID | order_date |
| --- | ------- | ---------- |

プライマリーキー：ID

外部キー：user_ID

---

[注文商品テーブル]

| ID  | item_ID | order_ID | (quantity)(購入数量) |
| --- | ------- | -------- | -------------------- |

プライマリーキー：ID

外部キー：item_ID, order_ID

---

[商品テーブル]

| ID  | name | price | category_ID |
| --- | ---- | ----- | ----------- |

プライマリーキー：ID

外部キー：category_ID

---

[カテゴリーテーブル]

| ID  | category_name |
| --- | ------------- |

プライマリーキー：ID

また、新たな要件である「カテゴリー ID をキーとして、カテゴリーごとに商品を検索できる」ことも、

**商品テーブルの category_ID を用いて、カテゴリーごとの商品検索ができます。**

---

## ボイスコッド正規形

病院の管理システムのデータベースを設計してください。

要件は次の通りです。

患者と診療科が決まると担当医師も決まる(担当医師は一人のみ)
一人の医師は一つの診療科を担当する
一人の患者は複数の診療科を受診することがある
現在、次のテーブルが作成されています。

[担当医師テーブル]

患者
診療科
担当医師
プライマリーキー：患者,診療科

このテーブルはボイスコッド正規形になっていません。

このテーブルがボイスコッド正規形になるよう設計してください。

テーブル名と、テーブルに紐づくカラム名とプライマリーキーを記載してください。

なお、テーブル名とカラム名は日本語で大丈夫です。

[患者テーブル]

| ID  | 患者 |
| --- | ---- |

プライマリーキー：ID

---

[診療科テーブル]

| ID  | 診療科 |
| --- | ------ |

プライマリーキー：ID

---

[医師テーブル]

| ID  | 担当医師 | 診療科 ID |
| --- | -------- | --------- |

プライマリーキー：ID
外部キー：診療科 ID

---

[患者診療科テーブル]

| ID  | 患者 ID | 診療科 ID |
| --- | ------- | --------- |

プライマリーキー：ID
外部キー：患者 ID, 診療科 ID

---

このテーブル設計では、患者、診療科、医師がそれぞれ独立したテーブルに分割されており、多値従属が解消されてます

**患者診療科テーブルを用いて、患者が受診する診療科を記録できます。**

また、医師テーブルに診療科 ID を外部キーとして設定することで、医師と診療科の関係も管理できます。

この設計により、ボイスコッド正規形に準拠しています。
